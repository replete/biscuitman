/*! biscuitman.js 0.5.0 */let e,t,o;let{document:a,window:n,Object:l}=globalThis,i=a.documentElement,s={key:"myconsent",global:"Consent",force:!1,enableMore:!0,sections:["essential"],title:"Your privacy matters",message:"We use cookies",settings:"Settings",reject:"Reject All",accept:"Accept All",save:"Save My Settings",settingsTitle:"My Consent Settings",info:"",more:"Show more",noCookies:"No cookies to display",acceptNonEU:!1,dialogPolyfill:"/dist/dialog-polyfill.withcss.min.js"},c=document.createElement("div"),r={},d=()=>{i.style.setProperty("--bm-height",`${c.offsetHeight}px`)},m=e=>{i.classList.toggle("bm-show",e),d()},p=()=>{let{consentTime:t,...o}=g();for(let[a,n]of(t||(o=l.fromEntries(e.sections.slice(1).map(e=>[e,!1]))),l.entries(o)))i.classList.toggle(`bm-${a}`,n),i.classList.toggle(`bm-no-${a}`,!n)};function u(e){let o=e.target.dataset.id;switch(b("button",{id:o}),o){case"accept":E(!0);break;case"close":t.close();break;case"settings":f();break;case"save":E();break;case"reject":E(!1)}}function f(){b("open"),t.showModal()}function b(e,t){let o=`bm:${e}`,n={...void 0!==t&&t,time:+new Date};a.dispatchEvent(new CustomEvent(o,{detail:n})),console.debug(o,n),r[o]&&r[o].forEach(e=>e(n))}let g=()=>n[e.global]||{};function $(t){n[e.global]=t,p()}let h=e=>!!g()[e];function v(e,t){for(let o in e)e[o]&&!1===t[o]&&b("revoke",{section:o})}function y(){try{return JSON.parse(localStorage.getItem(e.key))}catch(t){return console.error(t),localStorage.removeItem(e.key),{}}}function k(){let t=l.fromEntries(l.entries(localStorage)),o=l.fromEntries(a.cookie.split("; ").map(e=>e.split("="))),{consentTime:n,...i}=y()||e.sections.slice(1).reduce((e,t)=>(e[t]=!1,{consentTime:void 0,...e}),{});for(let[n,s]of l.entries(i)){if(s)continue;let i=l.keys(e[`${n}Cookies`]||{});for(let e of(i.filter(e=>e.endsWith("*")).map(e=>{l.keys({...o,...t}).map(t=>{t.startsWith(e.slice(0,-1))&&i.push(t)})}),i)){if(o[e]){let t=`${e}=;expires=Thu, 01 Jan 1970 00:00:01 UTC;path=/;`;a.cookie=t,a.cookie=`${t}domain=${location.hostname};`,a.cookie=`${t}domain=.${location.hostname};`,b("delete",{cookie:e})}t[e]&&(localStorage.removeItem(e),b("delete",{localStorage:e}))}}}function E(o){let a=void 0===o,n={consentTime:+new Date};e.sections.forEach(e=>{if("essential"===e)return;let t=c.querySelector(`[data-s=${e}]`),l=a?t.checked:o;n[e]=l,a||(t.checked=o)}),v(g(),n),$(n),localStorage.setItem(e.key,JSON.stringify(n)),b("save",{data:n}),k(),T(),t.open&&t.close(),m(!1)}function T(){a.querySelectorAll("script[data-consent]").forEach(e=>{if(!g()[e.dataset.consent])return;let t=a.createElement("script");for(let{name:o,value:a}of e.attributes)o.startsWith("data-")||"type"===o||t.setAttribute(o,a);t.setAttribute("type",e.dataset.type||"text/javascript"),e.src||(t.textContent=e.textContent),e.parentNode.replaceChild(t,e),b("inject",{el:e,...e.id&&{id:e.id}}),e.src&&""!==e.textContent.trim()&&t.addEventListener("load",()=>{let o=a.createElement("script");o.textContent=e.textContent,e.id&&(o.id=e.id+"-after"),t.insertAdjacentElement("afterend",o),b("inject",{el:o,parent:e,...o.id&&{id:o.id}})})})}export default{create:function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o)return o;e={...s,...i};let p=n.bmInvalidate=()=>{b("invalidate",{data:g()}),v({}),E(!1),$({}),localStorage.removeItem(e.key),m(!0),e.force&&t.showModal()},S=n.bmUpdate=()=>{b("update",{data:g()}),f()};return $(y()||{}),function(){let t=Intl.DateTimeFormat().resolvedOptions().timeZone,o=/^(GMT|UTC)$/.test(t)||/(Europe|BST|CEST|CET|EET|IST|WEST|WET|GMT-1|GMT-2|UTC+1|UTC+2|UTC+3)/.test(t);e.acceptNonEU&&!o&&(E(!0),m(!1))}(),function(){c.className="biscuitman",c.innerHTML=`<article>    <b>${e.title}</b><p>${e.message}</p><nav><button data-id="accept">${e.accept}</button><button data-id="settings">${e.settings}</button><button data-id="reject">${e.reject}</button></nav></article><dialog><div class="bm-dialog"><b>${e.settingsTitle}</b><button data-id="close"${e.force?" disabled":""}>\xd7</button><div class="bm-sections"><p><span>${e.message}</span></p><p>${e.info.split("\n").map((t,o,a)=>`<span>${t}</span>${a.length>1&&e.enableMore&&0==o?`<a class="more" href="javascript:void(0)">${e.more}</a>`:""}`).join("")}</p>${e.sections.map(t=>{let o=g()[t],a="essential"===t,n=a?"disabled":"",i=a?"checked":"";void 0!==o&&(i=o?"checked":"");let s=e[`${t}Cookies`];return`<section><details><summary><b>${e[`${t}Title`]}</b><label for="bm_${t}" class="${n} ${i}"><input type="checkbox" id="bm_${t}" ${n} ${i} data-s="${t}"/></label><p>${e[`${t}Message`]}</p></summary>${s?l.entries(s).map(e=>{let[t,o]=e;return`<dl><dt>${t}</dt><dd>${o}</dd></dl>`}).join(""):`<dl><dd>${e.noCookies}</dd></dl>`}</details></section>`}).join("")}</div><nav><button data-id="accept">${e.accept}</button><button data-id="save">${e.save}</button><button data-id="reject">${e.reject}</button></nav></div></dialog>`.replaceAll("{link}",`<a href="${e.linkURL}">${e.linkText}</a>`),c.querySelectorAll("button").forEach(e=>e.addEventListener("click",u)),(t=c.querySelector("dialog")).onclose=()=>b("close"),e.force&&(t.oncancel=e=>e.preventDefault(),t.onkeydown=e=>"Escape"===e.key?e.preventDefault():null),(!e.dialogPolyfill||t.close)&&t.showModal||function(t){function o(){a.documentElement.classList.add("bm-dialog-polyfill"),n.dialogPolyfill.registerDialog(t)}if(n.dialogPolyfill)o();else{let t=a.createElement("script");t.onload=o,t.src=e.dialogPolyfill,a.head.appendChild(t)}}(t);let o=c.querySelector(".more");o&&o.addEventListener("click",o.remove),c.querySelectorAll("[data-s]").forEach(e=>e.addEventListener("change",t=>{e.parentElement.classList.toggle("checked",t.target.checked)})),a.body.appendChild(c),n.addEventListener("resize",d)}(),k(),n[e.global].consentTime?(m(!1),T()):(m(!0),e.force&&f()),o={consent:h,invalidate:p,update:S,on:(e,t)=>{let a=`bm:${e}`;return r[a]||(r[a]=[]),r[a].push(t),o},off:(e,t)=>{let o=`bm:${e}`;r[o]&&(r[o]=r[o].filter(e=>e!==t))}}}};